<!DOCTYPE html>
<html>
<head>
    <environment names="Development">
    </environment>

    <environment names="Staging, Production">
    </environment>
</head>

<body>
    <div id="akc-component">
        @{
            var expandoDict = (IDictionary<string, object>)Model;
            var model = (ParserWebHelper)expandoDict["model"];
            var clippingData = model.clippingData;
        }
        <a href="@(Url.Action("export") + ViewContext.HttpContext.Request.QueryString)">Export visible</a>
        <a href="@(Url.Action("export_all"))">Export all</a>

        @(Html
            .Grid(clippingData)
            .Build(columns => {
                columns.Add(item => item.Author).Titled("Author");
                columns.Add(item => item.BookName).Titled("Book Name");
                columns.Add(item => item.ClippingType).Titled("ClippingType");
                columns.Add(item => item.DateAdded).Titled("Date Added");
                columns.Add(item => item.Location).Titled("Location");
                columns.Add(item => item.Text).Titled("Text");
            })
        .Filterable()
        .Sortable()
        .Pageable(pager => {
            pager.RowsPerPage = 10;
        })
        )
    </div>

    <script type="text/javascript">
        $(function () {
            $('#exportButton').click(function () {
                location.href = MVCGrid.getExportUrl('ExportGrid');
            });
        });
    </script>

    <script>
            $('.mvc-grid').mvcgrid();
    </script>
</body>
</html>